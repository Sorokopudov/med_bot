# AI Health Assistant (FastAPI + DynamoDB + FAISS + OpenAI)

- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏—Ö –∞–Ω–∞–º–Ω–µ–∑–æ–º
- –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –∏—Å–ø–æ–ª—å–∑—É—è OpenAI –∏ FAISS-–ø–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç welcome-—Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π (–µ—Å–ª–∏ —á–∞—Ç –ø—É—Å—Ç)

---

## üß† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **FastAPI** ‚Äî REST API –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **DynamoDB (–ª–æ–∫–∞–ª—å–Ω–æ)** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- **FAISS (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å)** ‚Äî –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
- **OpenAI API** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É–º–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ (—á–µ—Ä–µ–∑ GPT)
- **Docker** ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
git clone https://your-repo-url
cd your-project-folder
```

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π `.env` —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:

```env
# OpenAI API Key
OPENAI_API_KEY=sk-59uq...........Yfu9c728R

# DynamoDB Configuration
DYNAMODB_ENDPOINT=http://172.17.0.1:8001
AWS_ACCESS_KEY_ID=dummy
AWS_SECRET_ACCESS_KEY=dummy
AWS_REGION=us-west-2
TABLE_NAME=Users

# FAISS
FAISS_SERVICE_URL=http://172.17.0.1:8010/search

# Messenger integration
MESSENGER_BASE_URL=http://172.17.0.1:4200
WELCOME_DELAY_MINUTES=1
WELCOME_CHECK_INTERVAL=30
```

_–£–±–µ–¥–∏—Å—å, —á—Ç–æ FAISS, DynamoDB –∏ Messenger-—Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ —ç—Ç–∏–º –∞–¥—Ä–µ—Å–∞–º._

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
docker-compose up --build
```

---

## üåê –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | URL                         | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                              |
|-------|-----------------------------|------------------------------------------|
| GET   | `/`                         | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞                         |
| GET   | `/users`                   | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π                |
| GET   | `/add_user`               | –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è     |
| POST  | `/add_user`               | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ / –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è     |
| POST  | `/process_question`       | –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç GPT + FAISS)   |
| POST  | `/scenario/execute`       | –í—ã–ø–æ–ª–Ω–∏—Ç—å —à–∞–≥ —Å—Ü–µ–Ω–∞—Ä–∏—è                   |

---

## üí¨ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (`/scenario/execute`)

–≠—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–¥–∏–Ω —à–∞–≥ —Å—Ü–µ–Ω–∞—Ä–∏—è, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∏–∑ JSON-—Ñ–∞–π–ª–∞.

### üîπ –ó–∞–ø—Ä–æ—Å

```json
{
  "scenarioFileName": "onboarding_welcome_scenario.json",
  "metadata": {
    "userId": "abc123"
  },
  "userAnswer": {
    "stepId": "welcome_step",
    "selectedButtonId": "btn_checkups"
  }
}
```

> `userAnswer` –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω ‚Äî –µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π —à–∞–≥ —Å—Ü–µ–Ω–∞—Ä–∏—è.

### üîπ –û—Ç–≤–µ—Ç

```json
{
  "scenarioId": "onboarding_welcome_scenario",
  "nextStepId": "checkups_step",
  "step": {
    "stepId": "checkups_step",
    "name": "Check-Ups Info",
    "messages": [
      "Check-Ups are like a quick visit to a kind, thoughtful doctor..."
    ],
    "answerType": null,
    "buttons": []
  }
}
```

### üìå –ü–æ–≤–µ–¥–µ–Ω–∏–µ:

- –í—Å–µ —à–∞–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `scenario_history` –≤–Ω—É—Ç—Ä–∏ DynamoDB.
- –û—Ç–≤–µ—Ç **–ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è** –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
- **–§—Ä–æ–Ω—Ç** –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å `messages` –≤—Ä—É—á–Ω—É—é.

---

## ü§ñ Welcome-–≤–æ—Ä–∫–µ—Ä (–æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ)

–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `/add_user`, –≤ —Ç–∞–±–ª–∏—Ü–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å —Å `processed = false`.

–§–æ–Ω–æ–≤—ã–π –≤–æ—Ä–∫–µ—Ä:

1. –°–∫–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å `processed = false`
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: –µ—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **–Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ –æ—Ç support** ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç welcome
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `processed = true`

_–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤._

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ scenarios/
‚îÇ   ‚îî‚îÄ‚îÄ onboarding_welcome_scenario.json  # JSON-—Ñ–∞–π–ª —Å—Ü–µ–Ω–∞—Ä–∏—è
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ main.py              # FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    ‚îú‚îÄ‚îÄ prompts.py           # –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
    ‚îú‚îÄ‚îÄ db_manager.py        # –†–∞–±–æ—Ç–∞ —Å DynamoDB
    ‚îú‚îÄ‚îÄ templates/           # HTML-—à–∞–±–ª–æ–Ω—ã
    ‚îî‚îÄ‚îÄ ...
```

